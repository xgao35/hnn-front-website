<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        <title>
            HNN
        </title>
        <!-- <base href="/website_redesign/"> -->
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400&display=swap" rel="stylesheet"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
        <link href="styles.css" rel="stylesheet"/>
    </head>
    <body>
        <div id="main">
            <div class="topbar">
                <div id="topbar-wrapper">
                    <div class="hamburger" onclick="toggleMobileMenu()">
                        ☰
                    </div>
                    <div class="links">

                        <a href="homepage.html" class="home-link">
                            <div class="home-icon-container">
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="24" 
                                    height="24"
                                    viewBox="0 0 24 24" 
                                    class="home-icon">
                                    <path
                                        d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                                    />
                                </svg>
                            </div>
                        </a>
                        <a href="https://jonescompneurolab.github.io/hnn-core/stable/install.html">
                            Install
                        </a>
                        <a href="https://dylansdaniels.github.io/website_redesign/content/preface.html">
                            Tutorials
                        </a>
                        <a href="https://jonescompneurolab.github.io/hnn-core/stable/index.html">
                            Documentation
                        </a>
                        <a href="contact.html">
                            Contact
                        </a>
                    </div>
                    <!-- Right side of topbar-->
                    <div class="topbar-right">
                        <div class="dropdown">
                            <button class="dropdown-button" id="dropdownButton">
                                <span class="dropdown-text">
                                    <span>
                                        More
                                    </span>
                                    <span class="caret">
                                    </span>
                                </span>
                            </button>
                            <div class="dropdown-content">
                                <a href="developers.html">
                                    Developers
                                </a>
                                <a href="publications.html">
                                    <!-- <span class="external-icon"></span> -->
                                    Publications
                                </a>
                                <a href="https://github.com/jonescompneurolab/hnn-core/discussions/categories/announcements">
                                    <!-- <span class="external-icon"></span> -->
                                    Announcements
                                </a>
                            </div>
                        </div>
                        <div class="social-icons">
                            <a aria-label="GitHub" href="https://github.com/jonescompneurolab/hnn-core" target="_blank">
                                <img alt="GitHub" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/icons/github.png"/>
                            </a>
                            <a aria-label="BlueSky" href="https://bsky.app/profile/hnnsolver.bsky.social" target="_blank">
                                <img alt="BlueSky" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/icons/bluesky.png"/>
                            </a>
                            <a aria-label="LinkedIn" href="https://www.linkedin.com/company/human-neocortical-neurosolver/" target="_blank">
                                <img alt="LinkedIn" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/icons/linkedin.png"/>
                            </a>
                        </div>
                    </div>
                    <div id="mobile-menu" class="mobile-menu">
                        <div class="links">
                            <a href="homepage.html" class="home-link">
                                Home
                            </a>
                            <a href="https://jonescompneurolab.github.io/hnn-core/stable/install.html">
                                Install
                            </a>
                            <a href="https://dylansdaniels.github.io/website_redesign/content/preface.html">
                                Tutorials
                            </a>
                            <a href="https://jonescompneurolab.github.io/hnn-core/stable/index.html">
                                Documentation
                            </a>
                            <a href="contact.html">
                                Contact
                            </a>
                            <a href="developers.html">
                                Developers
                            </a>
                            <a href="publications.html">
                                Publications
                            </a>
                            <a href="https://github.com/jonescompneurolab/hnn-core/discussions/categories/announcements">
                                Announcements
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="content-wrapper">
                <div id="content">
                    <!--
                    # Title: Homepage
                    # Updated: 2025-05-05
                    -->
                    <br/>
                    <div id="logo-wrapper">
                        <img alt="HNN" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/logos/logo-hnn-medium.png"/>
                        <p>
                            <span style="color: var(--hnn-blue)">
                                HUMAN
                            </span>
                            <span style="color: var(--hnn-purple)">
                                NEOCORTICAL
                            </span>
                            <span style="color: var(--hnn-violet)">
                                NEUROSOLVER
                            </span>
                        </p>
                    </div>
                    <div id="logo-subtitle">
                        <p>
                            An open-source software for developing and testing hypotheses on the cellular- and circuit-level mechanisms of electro- and magneto-encephalography (EEG/MEG) signals.
                        </p>
                        <img src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/bridging_scales.png" style="max-width:90%"/>
                        <p>
                            HNN uniquely translates commonly measured human EEG/MEG signals to the wealth of knowledge obtainable in animal studies.
                        </p>
                    </div>
                    <!-- start gallery -->
                    <div class="gallery">
                        <div class="card" data-popup="popup1">
                            <div class="image" style="background-image: url('https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/current-source.png');">
                            </div>
                            <div class="overlay">
                                <h1>
                                    Getting Started
                                </h1>
                                <p>
                                    The Human Neocortical Neurosolver (HNN) is an open-source neural modeling tool in Python designed to help researchers/clinicians interpret human brain imaging data. The core of HNN is a large-scale and biophysically-detailed template model of a neocortical column model that simulates primary current dipoles; i.e., the neural sources of the sensor-level EEG/MEG signal.
                                </p>
                            </div>
                        </div>
                        <div class="card" data-popup="popup2">
                            <div class="image" style="background-image: url('https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/bridging_scales.png');">
                            </div>
                            <div class="overlay">
                                <h1>
                                    The Biophysical Challenge
                                    <h1>
                                        <p>
                                            Electro- and magneto-encephalography (EEG/MEG) are among the most powerful technologies to non-invasively record human brain activity with millisecond resolution. They provide reliable markers of healthy brain function and disease states. A major limitation is that it is often difficult to connect the macroscopic scale-measured signals to the underlying cellular and circuit-level neural generators. This difficulty limits the translation of EEG/MEG studies into novel principles of information processing, or into new treatment modalities for neural pathologies.
                                        </p>
                                    </h1>
                                </h1>
                            </div>
                        </div>
                        <div class="card" data-popup="popup3">
                            <div class="image" style="background-image: url('https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/AlphaAndBeta_Spect_plotonly.png');">
                            </div>
                            <div class="overlay">
                                <h1>
                                    ERPs and Rhythms
                                </h1>
                                <p>
                                    Our HNN Textbook is designed to teach users how to begin studying the origins of ERP and brain rhythms based on our previously-published studies. We provide data, initial parameter and network configurations, and workflows to teach users how to develop and test hypotheses on the neural origin of the most commonly recorded EEG/MEG signals, including event-related potentials (ERPs), Gamma Rhythms (30-80Hz), and low-frequency rhythms including Alpha (7-14Hz) and Beta Rhythms (15-29Hz).
                                </p>
                            </div>
                        </div>
                        <div class="card" data-popup="popup4">
                            <div class="image" style="background-image: url('https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/multi-scale-vis.png');">
                            </div>
                            <div class="overlay">
                                <h1>
                                    Multi-Scale Visualization
                                    <h1>
                                        <p>
                                            HNN provides easy-to-use interfaces to a wide range of visualization and plotting capabilities across different dimensions and scales of your simulations. At the macro-scale, we provide visualizations for simulated and experimental data such as the current dipoles that produce EEG and MEG signals. At the meso-scale [TODO double check with Steph/etc.], we enable simulation and plotting of laminar LFP and CSD output, including the relative position of electrodes with respect to cells.
                                        </p>
                                    </h1>
                                </h1>
                            </div>
                        </div>
                        <div class="card" data-popup="popup5">
                            <div class="image" style="background-image: url('https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/sphx_glr_plot_batch_simulate_001.png');">
                            </div>
                            <div class="overlay">
                                <h1>
                                    Fitting to Data
                                    <h1>
                                        <p>
                                          HNN provides two ways to fit its pre-tuned neural models to your experimental data: Hand-Tuning and Optimization.
                                        </p>
                                    </h1>
                                </h1>
                            </div>
                        </div>
                        <div class="card" data-popup="popup6">
                            <div class="image" style="background-image: url('https://raw.githubusercontent.com/jonescompneurolab/hnn-under_the_hood/master/html-styling/images/drives.png');">
                            </div>
                            <div class="overlay">
                                <h1>
                                    Model Validation
                                </h1>
                                <p>
                                  HNN's foundational neocortical column model, referred to as the HNN Template Model, is a tuned implementation of the computational model in (Jones et al. 2007).
                                </p>
                            </div>
                        </div>
                    </div>
                    <!-- close gallery -->
                    <br/>
                    <div id="funders">
                        <p>
                            Supporting Institutions
                        </p>
                    </div>
                    <div class="logo-container">
                        <div class="logo-grid">
                            <div class="logo">
                                <img alt="carney" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/logos/logo-carney.png"/>
                            </div>
                            <div class="logo">
                                <img alt="mgh" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/logos/logo-mgh.png"/>
                            </div>
                            <div class="logo">
                                <img alt="yale" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/logos/logo-yale.png"/>
                            </div>
                            <div class="logo">
                                <img alt="aarhus" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/logos/logo-aarhus.png"/>
                            </div>
                            <div class="logo">
                                <img alt="nimh" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/logos/logo-nimh.png"/>
                            </div>
                            <div class="logo">
                                <img alt="nibib" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/logos/logo-nibib.jpg"/>
                            </div>
                            <div class="logo">
                                <img alt="va" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/logos/logo-va.jpg"/>
                            </div>
                        </div>
                    </div>
                    <!-- start popup containers -->
                    <div class="popup-container" id="popup1">
                        <div class="popup-box">
                            <div class="popup-close-wrapper">
                                <button class="popup-close">
                                    ×
                                </button>
                            </div>
                            <h2>
                                Getting Started
                            </h2>
                            <p>
                                The Human Neocortical Neurosolver (HNN) is an open-source neural modeling tool in Python designed to help researchers/clinicians interpret human brain imaging data. The core of HNN is a large-scale and biophysically-detailed template model of a neocortical column model that simulates primary current dipoles; i.e., the neural sources of the sensor-level EEG/MEG signal.
                                <br/>
                                <br/>
                                <img alt="Current sources" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/current-source.png"/>
                                <br/>
                                HNN is designed as a starting point for developing and testing predictions on the detailed neural mechanisms contributing to EEG/MEG signals based on the known biophysics of their generation. The multi-scale simulation possible with HNN (layer and cell-specific spiking, LFP/CSD, etc.) facilitates testing of model-derived predictions across multiple recording scales and species.
                                <br/>
                                <br/>
                                HNN is designed with workflows to activate the neocortical model with activity from exogenous thalamic and intracortical sources. We provide detailed tutorials on how to study the neural origin of source-localized event-related potentials and low-frequency brain rhythms. Following our workflows, users can quickly develop an intuition of how cells and circuits contribute to macroscale signal generation.
                                <br/>
                                <br/>
                                See our
                                <a href="https://dylansdaniels.github.io/website_redesign/content/preface.html">
                                    HNN Textbook
                                </a>
                                to get started with HNN.
                            </p>
                        </div>
                    </div>
                    <div class="popup-container" id="popup2">
                        <div class="popup-box">
                            <div class="popup-close-wrapper">
                                <button class="popup-close">
                                    ×
                                </button>
                            </div>
                            <h2>
                                The Biophysical Challenge
                            </h2>
                            <p>
                                Electro- and magneto-encephalography (EEG/MEG) are among the most powerful technologies to non-invasively record human brain activity with millisecond resolution. They provide reliable markers of healthy brain function and disease states. A major limitation is that it is often difficult to connect the macroscopic scale-measured signals to the underlying cellular and circuit-level neural generators. This difficulty limits the translation of EEG/MEG studies into novel principles of information processing, or into new treatment modalities for neural pathologies.
                                <br/>
                                <br/>
                                <img alt="Bridging scales" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/bridging_scales.png"/>
                                <br/>
                                HNN is a user-friendly software tool that provides a novel solution to this challenge by giving researchers and clinicians the ability to test and develop hypotheses on the circuit mechanism underlying their EEG/MEG data. The foundation of HNN is a preconstructed biophysically-principled neocortical column model that simulates the electrical activity of the neocortical cells and circuits that generate the primary electrical currents underlying EEG/MEG recordings.
                                <br/>
                                <br/>
                                To learn more, see the
                                <a href="">
                                    Biophysical Modeling
                                </a>
                                section of our HNN Textbook
                            </p>
                        </div>
                    </div>
                    <div class="popup-container" id="popup3">
                        <div class="popup-box">
                            <div class="popup-close-wrapper">
                                <button class="popup-close">
                                    ×
                                </button>
                            </div>
                            <h2>
                                ERPs and Rhythms
                            </h2>
                            <p>
                                Our
                                <a href="https://dylansdaniels.github.io/website_redesign/content/preface.html">
                                    HNN Textbook
                                </a>
                                is designed to teach users how to begin studying the origins of ERP and brain rhythms based on our previously-published studies. We provide data, initial parameter and network configurations, and workflows to teach users how to develop and test hypotheses on the neural origin of the most commonly recorded EEG/MEG signals, including event-related potentials (ERPs), Gamma Rhythms (30-80Hz), and low-frequency rhythms including Alpha (7-14Hz) and Beta Rhythms (15-29Hz).
                                <br/>
                                <br/>
                                <img alt="Simulating Alpha/Beta" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/AlphaAndBeta_Spect_plotonly.png"/>
                                <br/>
                                Our simulation examples follow a step-by-step process that serves as a guide on how you can use HNN to develop and test your own hypotheses on the biophysical origins of your recorded signals. You can find our
                                <a href="https://dylansdaniels.github.io/website_redesign/content/05_erps/hnn_core.html">
                                    guide to simulating ERPs here
                                </a>
                                or our
                                <a href="https://dylansdaniels.github.io/website_redesign/content/06_alpha_beta/gui.html">
                                    guide to simulating Alpha/Beta here
                                </a>
                                .
                            </p>
                        </div>
                    </div>
                    <div class="popup-container" id="popup4">
                        <div class="popup-box">
                            <div class="popup-close-wrapper">
                                <button class="popup-close">
                                    ×
                                </button>
                            </div>
                            <h2>
                                Multi-Scale Visualization
                            </h2>
                            <p>
                              HNN provides easy-to-use interfaces to a wide range of visualization and plotting capabilities across different dimensions and scales of your simulations. At the macro scale, we provide visualizations for simulated and experimental data such as the current dipoles that produce EEG and MEG signals. At the meso scale, we enable simulation and plotting of laminar LFP and CSD output, including the relative position of electrodes with respect to cells. At the micro scale (i.e., on the level of individual cells) we can plot spike rasters, compartmental voltage traces, intracellular state variables like calcium, and many different visualizations of synaptic network connectivity. We provide
                                <a href="https://jonescompneurolab.github.io/hnn-core/stable/auto_examples/index.html">
                                    many tutorials on how to use and visualize in HNN on our code website here.
                                </a>
                            </p>
                            <img alt="Visualizations across multiple scales" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/multi-scale-vis.png"/>
                        </div>
                    </div>
                    <div class="popup-container" id="popup5">
                        <div class="popup-box">
                            <div class="popup-close-wrapper">
                                <button class="popup-close">
                                    ×
                                </button>
                            </div>
                            <h2>
                                Fitting to Data
                            </h2>
                            <p>
                              HNN provides two ways to fit its pre-tuned neural models to your experimental data:
                              <br/>
                              <br/>
                              <b>Hand-tuning</b>: With both the GUI and API, HNN provides all the tools needed for changing parameters to produce new simulations that better match the user's experimental data. HNN is especially powerful for understanding how external drives to the network impact the network and its outputs, including the current dipole that comprises MEG/EEG signals. Manually exploring the simulated parameter space helps users to either test or generate hypotheses tied to specific biological processes, such as statistical changes to inputs, E/I balance, between-layer communication, and much more.
                              <br/>
                              <br/>
                              <b>Optimization</b>: Given user-provided constraints, HNN can also minimize the root mean square error (RMSE) between a user-provided experimental dipole signal and simulated dipole signals. Understanding which changes lead to a better match between simulated and experimental data will guide users to novel hypotheses of how the underlying biology works. HNN currently provides support for Bayesian and COBYLA optimization algorithms. See
                              <a href="https://jonescompneurolab.github.io/hnn-core/stable/auto_examples/howto/optimize_evoked.html#sphx-glr-auto-examples-howto-optimize-evoked-py">
                                our Optimization tutorials here
                              </a>
                              for how to get started using it.
                              <br/>
                              <br/>
                              <img alt="Optimization examples" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/content-images/fitting-to-data.png"/>
                            </p>
                        </div>
                    </div>
                    <div class="popup-container" id="popup6">
                        <div class="popup-box">
                            <div class="popup-close-wrapper">
                                <button class="popup-close">
                                    ×
                                </button>
                            </div>
                            <h2>
                                Model Validation
                            </h2>
                            <p>
                              HNN's foundational neocortical column model, referred to as the HNN Template Model (shown below), is a tuned implementation of the computational model in
                              <a href="https://doi.org/10.1523%2FJNEUROSCI.0482-07.2007">
                                (Jones et al. 2007)
                              </a>
                              This model was developed based on canonical principles of neocortical circuitry and contains the minimal circuit elements necessary for generating primary current dipoles and connecting dipole output to layer- and cell-specific neocortical activity.
                              <br/>
                              <br/>
                              <img alt="HNN Template model" src="https://raw.githubusercontent.com/jonescompneurolab/hnn-under_the_hood/master/html-styling/images/drives.png"/>
                              <br/>
                              Building HNN allowed us to test if the cell and network elements thought to be the primary generators of ERPs, alpha rhythms, beta rhythms, gamma rhythms, and other activity could produce macro-scale current dipole signals that were in agreement with our recorded data. While the literature guided us to a starting point that constrained the investigation, the exact parameters to use were unknown. By directly comparing the current dipole output of the model to source-localized experimental data, we were able to titrate parameters (both through hand tuning and algorithmic parameter estimation) to produce a close fit to the source waveform (i.e., using small root mean squared error (RMSE)). Once a close fit to the current dipole waveform was established, the model provided a number of testable predictions on the underlying cell and circuit activity; e.g. exogenous input timing and strength, cell spiking activity, LFP/CSD, etc.
                              <br/>
                              <br/>
                              For more detail on how our Template Model was validated, see the
                              <a href="https://dylansdaniels.github.io/website_redesign/content/03_model_assumptions/cortical_column_structure.html">Model Assumptions</a>
                              section of our HNN Textbook. For publications that have used our model, see
                              <a href="publications.html">our Publications page</a>.

                            </p>
                        </div>
                    </div>
                    <!-- end popup containers -->
                    <div style="height: 150px;">
                    </div>
                </div>
                <!-- close content -->
            </div>
            <!-- close content wrapper -->
        </div>
        <!-- close main -->
        <script>

            // ----------------------- //
            // ---- Dropdown Menu ---- //
            // ----------------------- //

            // E.g.: if open, close it; if closed, open it
            function toggleDropdown() {
                const dropdownContent = document.querySelector('.dropdown-content');
                dropdownContent.style.display =
                    dropdownContent.style.display === 'block' ? 'none' : 'block';
            }

            // Toggle the dropdown when clicking the dropdownButton
            document.addEventListener('DOMContentLoaded', () => {
                document
                    .getElementById('dropdownButton')
                    .addEventListener('click', event => {
                        // stopPropagation ensures the button click only toggles the 
                        // dropdown and doesn’t also trigger the outside-click handler 
                        // that would close it.
                        event.stopPropagation();
                        toggleDropdown();
                    });
            });

            // Close the dropdown if clicking anywhere outside the dropdown
            window.addEventListener('click', event => {
                if (!event.target.closest('.dropdown')) {
                    document.querySelector('.dropdown-content').style.display = 'none';
                }
            });

            // -------------------- //
            // --- Mobile Menu --- //
            // -------------------- //

            // Function to toggle mobile menu
            // ------------------------------
            function toggleMobileMenu() {
                const menu = document.getElementById("mobile-menu");
                const hamburger = document.querySelector(".hamburger");
                const isVisible = menu.style.display === "flex";

                menu.style.display = isVisible ? "none" : "flex";
                hamburger.classList.toggle("menu-open", !isVisible);
            }

            // Close the menu if clicking anywhere 
            // outside of the menu or hamburger
            // ------------------------------
            document.addEventListener("click", function(event) {
                const menu = document.getElementById("mobile-menu");
                const hamburger = document.querySelector(".hamburger");
                
                // Check if the click is outside of the hamburger and menu
                if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
                    menu.style.display = "none";
                    hamburger.classList.remove("menu-open");
                }
            });

            // Close the menu on window resize 
            // ------------------------------
            // Note: triggered if the width is greater than 650px

            window.addEventListener("resize", function() {
                if (window.innerWidth > 650) {
                    const menu = document.getElementById("mobile-menu");
                    menu.style.display = "none"; // Close the menu if resizing above 650px
                }
            });

            // Enable topbar to scroll with page
            // ------------------------------
            window.addEventListener('scroll', () => {
                const scrollX = window.scrollX;
                document.querySelector('.topbar').style.transform = `translateX(${-scrollX}px)`;
            });
        </script>

        <script>
            // ------------------- //
            // --- Card Popups --- //
            // ------------------- //
            const cards = document.querySelectorAll('.card');
            const popups = document.querySelectorAll('.popup-container');

            // Show popup on card click
            cards.forEach(card => {
                card.addEventListener('click', () => {
                    const popupId = card.getAttribute('data-popup');
                    const popup = document.getElementById(popupId);
                    if (popup) {
                        popup.classList.add('show'); // add 'show' class to display the popup
                        document.body.style.overflow = 'hidden'; // disable body scrolling

                        // Reset scroll position when the popup is opened
                        const popupBox = popup.querySelector('.popup-box');
                        if (popupBox) {
                            popupBox.scrollTop = 0; // Set scroll position to the top
                        }
                    }
                });
            });

            // Close popup on close button click
            document.querySelectorAll('.popup-close').forEach(button => {
                button.addEventListener('click', () => {
                    const popupContainer = button.closest('.popup-container');
                    if (popupContainer) {
                        popupContainer.classList.remove('show'); // Remove 'show' class to hide the popup
                        document.body.style.overflow = ''; // Re-enable body scrolling
                    }
                });
            });

            // Close popup on outside click
            popups.forEach(popup => {
                popup.addEventListener('click', (e) => {
                    if (e.target === popup) { // Check if the click is outside the popup content
                        popup.classList.remove('show'); // Remove 'show' class to hide the popup
                        document.body.style.overflow = ''; // Re-enable body scrolling
                    }
                });
            });
        </script>

        <script>
            // ----------------------- //
            // --- Developer Table --- //
            // ----------------------- //

            // get GitHub images //
            // ----------------- //
            // Load images from repo, fallback to GitHub if not found
            document.querySelectorAll('img[data-github]').forEach(img => {
                const user = img.getAttribute('data-github');
                if (!user) {
                    img.src = 'default.png'; // fallback image
                    return;
                }

                const repoURL = `https://raw.githubusercontent.com/jonescompneurolab/jones-website/refs/heads/master/images/developers/${user}.png`;
                const githubURL = `https://github.com/${user}.png`;

                const testImage = new Image();
                testImage.onload = () => {
                    img.src = repoURL;
                };
                testImage.onerror = () => {
                    img.src = githubURL;
                };
                testImage.src = repoURL;
            });

            // image tooltips for additional contributors
            document.querySelectorAll('.dev-grid.additional img[data-github]').forEach(img => {
                img.addEventListener('mouseenter', () => {
                    const altText = img.alt; // Get alt text of the image
                    if (!altText) return; // No alt text, no tooltip
                    
                    // Create the tooltip div
                    const tooltip = document.createElement('div');
                    tooltip.classList.add('name-tooltip');
                    tooltip.innerText = altText; // Set the tooltip text to the alt text
                    document.body.appendChild(tooltip);
                    
                    // Position the tooltip
                    const rect = img.getBoundingClientRect();
                    tooltip.style.position = 'absolute';
                    tooltip.style.left = `${rect.left + window.scrollX}px`;
                    tooltip.style.top = `${rect.bottom + window.scrollY + 4}px`; // Small gap below the image
                    
                    // Fade in the tooltip
                    requestAnimationFrame(() => {
                        tooltip.style.opacity = '1';
                    });
                    
                    // Hide tooltip when mouse leaves
                    img.addEventListener('mouseleave', () => {
                        tooltip.remove();
                    });
                });
            });


            // Set section width //
            // ----------------- //
            window.addEventListener("load", () => {
                const activeCards = document.querySelectorAll(".dev-grid:not(.inactive) .dev-card");

                activeCards.forEach(card => {
                    const name = card.querySelector('.name');
                    const image = card.querySelector('img');

                    const imageWidth = image.offsetWidth;
                    const nameScrollWidth = name.scrollWidth;
                    const baseWidth = Math.max(imageWidth, 0); // fallback in case

                    if (nameScrollWidth > baseWidth) {
                        // Name is wider than image → expand card
                        card.style.width = `${nameScrollWidth + 20}px`;
                    } else {
                        // Otherwise match image width (plus padding if you want)
                        card.style.width = `${imageWidth + 20}px`;
                    }
                });
            });

            // Tooltips for names and positions //
            // --------------------------------- //
            document.querySelectorAll('.dev-card .name, .dev-card .position').forEach(textElement => {
                const originalText = textElement.textContent;  // Store the original text
                const checkOverflow = () => {
                    // Check if the text is overflowing
                    const isOverflowing = textElement.scrollWidth > textElement.clientWidth;

                    if (isOverflowing && !textElement.querySelector('a')) {
                        // Create the anchor tag when the text overflows
                        const anchor = document.createElement('a');
                        anchor.setAttribute('href', 'javascript:void(0)');
                        anchor.setAttribute('tabindex', '-1');
                        anchor.setAttribute('name-tooltip', originalText);
                        anchor.textContent = originalText;
                        textElement.innerHTML = '';  // Clear the text element
                        textElement.appendChild(anchor);
                    } else if (!isOverflowing && textElement.querySelector('a')) {
                        // Remove the anchor tag if the text is no longer overflowing
                        textElement.innerHTML = originalText;  // Restore original text
                    }
                };

                // Check overflow initially and on window resize
                window.addEventListener('load', checkOverflow);
                window.addEventListener('resize', checkOverflow);
            });

            (() => {
                let tooltipVisible = false;

                // Delegate hover events
                document.addEventListener('mouseenter', (e) => {
                    const link = e.target.closest('.dev-card .name a[name-tooltip], .dev-card .position a[name-tooltip]');
                    if (!link) return;
                    if (tooltipVisible) return;

                    link._tt = setTimeout(() => {
                        document.querySelectorAll('.name-tooltip').forEach(t => t.remove());

                        const tip = document.createElement('div');
                        tip.className = 'name-tooltip';
                        tip.innerText = link.getAttribute('name-tooltip');
                        document.body.appendChild(tip);

                        const r = link.getBoundingClientRect();
                        tip.style.position = 'absolute';
                        tip.style.left = `${r.left + window.scrollX}px`;
                        tip.style.top = `${r.bottom + window.scrollY + 4}px`;

                        requestAnimationFrame(() => { tip.style.opacity = '1'; });
                        tooltipVisible = true;
                    }, 300);  // 300ms delay
                }, true);

                document.addEventListener('mouseleave', (e) => {
                    const link = e.target.closest('.dev-card .name a[name-tooltip], .dev-card .position a[name-tooltip]');
                    if (!link) return;

                    clearTimeout(link._tt);
                    document.querySelectorAll('.name-tooltip').forEach(t => t.remove());
                    tooltipVisible = false;
                }, true);
            })();
        </script>
    </body>
</html>
